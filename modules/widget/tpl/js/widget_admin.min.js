function completeGenerateCode(a){var b=a.widget_code;b=b.replace(/&/g,"&amp;"),b=b.replace(/\'/g,"&apos;");var c=get_by_id("widget_code");c.value=b}function completeGenerateCodeInPage(a,b,c,d){var e=a.widget_code;return opener&&e?(opener.doAddWidgetCode(e),void window.close()):void window.close()}function doDisplaySkinColorset(a,b){var c=a.options[a.selectedIndex].value;if(!c)return get_by_id("colorset_area").style.display="none",void setFixedPopupSize();var d=[];d.selected_widget=get_by_id("fo_widget").selected_widget.value,d.skin=c,d.colorset=b;var e=new Array("error","message","colorset_list");exec_xml("widget","procWidgetGetColorsetList",d,completeGetSkinColorset,e,d)}function completeGetSkinColorset(a,b,c,d){for(var e=jQuery("#fo_widget")[0].widget_colorset,f=e.options.length,g=c.colorset,h=0;f>h;h++)e.remove(0);if(a.colorset_list){for(var i=a.colorset_list.split("\n"),j=0,h=0;h<i.length;h++){var k=i[h].split("|@|");g&&g==k[0]&&(j=h);var l=new Option(k[1],k[0],!1,!1);e.options.add(l)}e.selectedIndex=j,jQuery("#colorset_area").show(),setFixedPopupSize()}}function getWidgetVars(){opener&&opener.selectedWidget&&opener.selectedWidget.getAttribute("widget")&&(selected_node=opener.selectedWidget,get_by_id("fo_widget").widgetstyle.value||(get_by_id("fo_widget").widgetstyle.value=selected_node.getAttribute("widgetstyle")),doFillWidgetVars())}function doFillWidgetVars(){if(opener&&opener.selectedWidget&&opener.selectedWidget.getAttribute("widget")){selected_node=opener.selectedWidget;var a=selected_node.getAttribute("skin"),b=selected_node.getAttribute("colorset"),c=parseInt(selected_node.getAttribute("widget_sequence"),10),d=jQuery("#fo_widget"),e=get_by_id("fo_widget");jQuery("#widget_skin").val(a);for(var f=selected_node.attributes,g=0;g<f.length;g++){var h=f[g].name,i=jQuery(selected_node).attr(h);if("Array"!=i&&!(jQuery("[name="+h+"]",d).size()>0)&&i&&"style"!=h){jQuery('<input type="hidden" name="'+h+'" >').val(i).appendTo("#fo_widget").get(0)}}var j=[];jQuery("input,select,textarea","#fo_widget").each(function(){j.push(this)});for(var k=0;k<j.length;k++){var l=j[k];if(0!==l.name.indexOf("_")&&"widgetstyle"!=l.name){var m=l.length,n=l.type;("undefined"==typeof n||!n)&&"undefined"!=typeof m&&"undefined"!=typeof l[0]&&m>0?n=l[0].type:m=0;var h=l.name;switch(n){case"hidden":case"text":case"textarea":var o=selected_node.getAttribute(h);if(!o)continue;var p=unescape(o);p?l.value=p:l.value=o;break;case"checkbox":if(selected_node.getAttribute(h)){var o=selected_node.getAttribute(h).split(",");if(e[h].length){for(var g=0;g<e[h].length;g++)for(var q=e[h][g].value,r=0;r<o.length;r++)if(q==o[r]){e[h][g].checked=!0;break}}else e[h].value==o&&(e[h].checked=!0)}break;case"select":case"select-one":var o=selected_node.getAttribute(h),s=e[h];if(!o)break;for(var g=0;g<s.options.length;g++)s.options[g].value==o?s.options[g].selected=!0:s.options[g].selected=!1}}}var t=selected_node.getAttribute("style");"object"==typeof t&&(t=t.cssText),e.style.value=t,e.widget_padding_left.value=selected_node.getAttribute("widget_padding_left"),e.widget_padding_right.value=selected_node.getAttribute("widget_padding_right"),e.widget_padding_bottom.value=selected_node.getAttribute("widget_padding_bottom"),e.widget_padding_top.value=selected_node.getAttribute("widget_padding_top"),a&&get_by_id("widget_colorset")&&get_by_id("widget_colorset").options.length<1&&b&&doDisplaySkinColorset(get_by_id("widget_skin"),b),e.widget_sequence.value=c}}function checkFixType(a){var b=a.options[a.selectedIndex].value;if("px"!=b){var c=get_by_id("fo_widget"),d=c.widget_width.value;d>100&&(c.widget_width.value=100)}}function insertSelectedModule(a,b,c,d){var e=get_by_id("_"+a),f=get_by_id(a);f.value=b,e.value=d+" ("+c+")"}function insertSelectedModules(a,b,c,d){for(var e=jQuery("#_"+a)[0],f=0;f<e.options.length;f++)if(e.options[f].value==b)return;var g=new Option(d+" ("+c+")",b,!1,!1);e.options[e.options.length]=g,e.options.length>8&&(e.size=e.options.length),syncMid(a)}function midMoveUp(a){var b=get_by_id("_"+a);if(!(b.selectedIndex<0)){var c=b.selectedIndex;if(!(1>c)){var d=b.options[c],e=b.options[c-1],f=d.value,g=d.text;d.value=e.value,d.text=e.text,e.value=f,e.text=g,b.selectedIndex=c-1,syncMid(a)}}}function midMoveDown(a){var b=get_by_id("_"+a);if(!(b.selectedIndex<0)){var c=b.selectedIndex;if(c!=b.options.length-1){var d=b.options[c],e=b.options[c+1],f=d.value,g=d.text;d.value=e.value,d.text=e.text,e.value=f,e.text=g,b.selectedIndex=c+1,syncMid(a)}}}function midRemove(a){var b=get_by_id("_"+a);if(!(b.selectedIndex<0)){var c=b.selectedIndex;b.remove(c),c-=1,0>c&&(c=0),b.options.length&&(b.selectedIndex=c),syncMid(a)}}function syncMid(a){for(var b=jQuery("#_"+a)[0],c=[],d=0;d<b.options.length;d++)c[c.length]=b.options[d].value;jQuery("#"+a).val(c.join(","))}function getModuleSrlList(a){var b=jQuery("#"+a);if(b[0]&&b.val()){var c=[];c.module_srls=b.val(),c.id=a;var d=["error","message","module_list","id"];exec_xml("module","getModuleAdminModuleList",c,completeGetModuleSrlList,d,c)}}function completeGetModuleSrlList(a,b){var c=a.id,d=jQuery("#_"+c);if(d[0]){var e=a.module_list;if(e){var f=e.item;("undefined"==typeof f.length||f.length<1)&&(f=[f]);for(var g=0;g<f.length;g++){var h=f[g].module_srl,i=f[g].mid,j=f[g].browser_title,k=new Option(j+" ("+i+")",h);d[0].options.add(k)}}}}function getModuleSrl(a){var b=get_by_id(a);if(b.value){var c=(b.value,[]);c.module_srls=b.value,c.id=a;var d=new Array("error","message","module_list","id");exec_xml("module","getModuleAdminModuleList",c,completeGetModuleSrl,d,c)}}function completeGetModuleSrl(a,b){var c=a.id,d=get_by_id("_"+c),e=get_by_id(c);if(e&&d){var f=a.module_list;if(f){var g=f.item;("undefined"==typeof g.length||g.length<1)&&(g=new Array(g)),e.value=g[0].module_srl,d.value=g[0].browser_title+" ("+g[0].mid+")"}}}function doAddWindowLoadEventLoader(a){windowLoadEventLoader.push(a)}function excuteWindowLoadEvent(){for(var a=0;a<windowLoadEventLoader.length;a++)windowLoadEventLoader[a]()}function selectWidget(a){var b=current_url.setQuery("selected_widget",a);document.location.href=b}function widgetstyle_extra_image_upload(a){a.act.value="procWidgetStyleExtraImageUpload",a.submit()}function MultiOrderSet(a){var b=jQuery("[name='selected_"+a+"']").get(0),c=[];for(i=0;i<b.options.length;i++)c.push(b.options[i].value);jQuery("[name='"+a+"']").val(c.join(","))}function MultiOrderAdd(a){var b=jQuery("[name='show_"+a+"']").get(0),c=jQuery("[name='selected_"+a+"']").get(0);jQuery("[name='default_"+a+"']").val().split(",");if(!(b.selectedIndex<0)){var d=b.selectedIndex,e=b.options[d].value;for(i=0;i<c.options.length;i++)if(c.options[i].value==e)return;c.options.add(new Option(e,e,!1,!1)),MultiOrderSet(a)}}function MultiOrderDelete(a){var b=(jQuery("[name='show_"+a+"']").get(0),jQuery("[name='selected_"+a+"']").get(0)),c=jQuery("[name='default_"+a+"']").val().split(","),d=b.selectedIndex;if(!(0>d)){for(i=0;i<c.length;i++)if(jQuery.inArray(b.options[d].value,c)>-1)return;b.remove(d),d-=1,0>d&&(d=0),b.options.length&&(b.selectedIndex=d),MultiOrderSet(a)}}function MultiOrderUp(a){var b=jQuery("[name='selected_"+a+"']").get(0);if(!(b.selectedIndex<0)){var c=b.selectedIndex;if(!(1>c)){var d=b.options[c],e=b.options[c-1],f=d.value,g=d.text;d.value=e.value,d.text=e.text,e.value=f,e.text=g,b.selectedIndex=c-1,MultiOrderSet(a)}}}function MultiOrderDown(a){var b=jQuery("[name='selected_"+a+"']").get(0);if(!(b.selectedIndex<0)){var c=b.selectedIndex;if(c!=b.options.length-1){var d=b.options[c],e=b.options[c+1],f=d.value,g=d.text;d.value=e.value,d.text=e.text,e.value=f,e.text=g,b.selectedIndex=c+1,MultiOrderSet(a)}}}function initMultiOrder(a){var b=jQuery("[name='selected_"+a+"']").get(0),c=jQuery("[name='init_"+a+"']").val(),d=jQuery("[name='"+a+"']").val();if(d){var e=d.split(",");for(i=0;i<e.length;i++)if(e[i].length>0){var f=new Option(e[i],e[i]);b.options.add(f)}}else{var g=c.split(",");for(i=0;i<g.length;i++)if(g[i].length>0){var f=new Option(g[i],g[i]);b.options.add(f)}}MultiOrderSet(a)}var selected_node=null,windowLoadEventLoader=[];jQuery(window).load(excuteWindowLoadEvent);