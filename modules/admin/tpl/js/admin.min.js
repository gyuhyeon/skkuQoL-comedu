function doInstallModule(a){var b=[];b.module_name=a,exec_xml("install","procInstallAdminInstall",b,completeInstallModule)}function doUpdateModule(a){var b=[];b.module_name=a,exec_xml("install","procInstallAdminUpdate",b,completeInstallModule)}function completeInstallModule(a){alert(a.message),location.reload()}function getOffset(a,b){for(var c=0,d=0;a&&a!=b;)c+=a.offsetTop,d+=a.offsetLeft,a=a.offsetParent;return{top:c,left:d}}jQuery(function(a){function b(){var b=a(".x>.body"),c=b.find(">.gnb"),d=b.children("#content.content");d.width("99.99%"),setTimeout(function(){d.removeAttr("style"),c.height()>d.height()&&d.height(c.height())},100)}if(window.scrollTo(0,0),a(document.body).on("click",".x [data-toggle]",function(){var b=a(this);if(b.is("a")&&b.attr("href")!=b.attr("data-toggle")){var c=b.attr("href");b.attr("data-toggle",c)}var d=a(b.attr("data-toggle")),e="a,input,button,textarea,select";return d.toggle(),d.is(":visible")&&!d.find(e).length?d.not(":disabled").attr("tabindex","0").focus():d.is(":visible")&&d.find(e).length?d.not(":disabled").find(e).eq(0).focus():b.focus(),!1}),a(document.body).on("click",".x [data-show]",function(){var b=a(this);if(b.is("a")&&b.attr("href")!=b.attr("data-show")){var c=b.attr("href");b.attr("data-show",c)}return a(b.attr("data-show")).show().attr("tabindex","0").focus(),!1}),a(document.body).on("click",".x [data-hide]",function(){var b=a(this);if(b.is("a")&&b.attr("href")!=b.attr("data-hide")){var c=b.attr("href");b.attr("data-hide",c)}return a(b.attr("data-hide")).hide(),b.focus(),!1}),a.fn.xeTabbable=function(){a(this).each(function(){var b=a(this);b.find(">.x_nav-tabs>li>a").each(function(b){a(this).attr("data-index",b+1)}),b.find(">.x_tab-content>.x_tab-pane").each(function(b){a(this).attr("data-index",b+1)})}),a('.x .x_tab-content>.x_tab-pane:not(".x_active")').hide()},a(".x .x_tabbable").xeTabbable(),a(document.body).on("click",'.x .x_nav-tabs>li>a[href^="#"]',function(){var b=a(this);return b.parent("li").hasClass("x_disabled")?!1:(b.parent("li").addClass("x_active").siblings().removeClass("x_active"),b.closest(".x_nav-tabs").next(".x_tab-content").find(">.x_tab-pane").eq(b.attr("data-index")-1).addClass("x_active").show().siblings(".x_tab-pane").removeClass("x_active").hide(),b.parents(".x_tabbable").trigger("tab_change",[parseInt(b.attr("data-index"))-1,b]),!1)}),a.fn.gnb=function(){var c=a(".x>.body"),d=c.find(">.gnb"),e=d.find(">ul>li"),f=new Date;f.setTime(f.getTime()+30758400),e.find(">a").prepend("<i />"),e.find(">ul").prev("a").append("<b />"),e.each(function(b){a(this).attr("data-index",b+1)});var g=e.find(">ul>li.active_").closest("li.active").attr("data-index");e.find(">ul>li.active_").clone().addClass("active").attr("data-index",g).prependTo("#gnbNav").find(">a").prepend("<i />"),e.find(">a").click(function(){function d(){c.removeClass("wide"),b()}var e=a(this),g=a(this).parent("li"),h=g.hasClass("open"),i=g.hasClass("active"),j=g.find(">ul").length>=1,k=c.hasClass("wide");return h||i||!j?h&&!i&&j&&!k?(g.removeClass("open").find(">ul").slideUp(100),d(),setCookie("__xe_admin_gnb_tx_"+e.data("href"),"close",f),!1):k&&!j||i||k&&h?(d(),!1):void 0:(g.addClass("open").find(">ul").slideDown(100),d(),setCookie("__xe_admin_gnb_tx_"+e.data("href"),"open",f),!1)}),d.find('>a[href="#gnbNav"]').click(function(){return a(this).parent(".gnb").toggleClass("open"),c.toggleClass("wide"),a(window).width()<=980&&!d.hasClass("open")&&a("#gnbNav").removeClass("ex"),b(),a(this).parent(".gnb").hasClass("open")?setCookie("__xe_admin_gnb_status","open",f):setCookie("__xe_admin_gnb_status","close",f),!1}),d.find(".exMenu>button").click(function(){a("#gnbNav").toggleClass("ex"),b(),a("#gnbNav").hasClass("ex")?setCookie("__xe_admin_gnb_ex_status","open",f):setCookie("__xe_admin_gnb_ex_status","close",f)});var h=getCookie("__xe_admin_gnb_status");h&&setCookie("__xe_admin_gnb_status",h,f);var i=getCookie("__xe_admin_gnb_ex_status");if(i&&setCookie("__xe_admin_gnb_xe_status",i,f),"undefined"!=typeof __xe_admin_gnb_txs)for(var j in __xe_admin_gnb_txs){var k=__xe_admin_gnb_txs[j],l=getCookie(k);setCookie(k,l,f)}},a(".gnb").gnb(),a(".x #lang").mouseleave(function(){a(this).hide()}).focusout(function(){var b=a(this);setTimeout(function(){b.find("a:focus").length||b.mouseleave()},500)}),a(".x th :checkbox").change(function(){var b=a(this),c=b.data("name");b.closest("table").find(":checkbox").filter(function(){var b=a(this);return!b.prop("disabled")&&(b.attr("name")==c||b.data("name")==c)}).prop("checked",b.prop("checked")).end().end().trigger("update.checkbox",[c,this.checked])}),a(document.body).on("click",".x .x_pagination .x_disabled, .x .x_pagination .x_active",function(){return!1}),a(".x .section").length>1){var c=a(".x .section").find(">h1:first");c.each(function(){var b=a(this);b.next().length&&b.append('<button type="button" class="snToggle x_icon-chevron-up">Toggle this section</button>')}),a(".x .section.collapsed>h1>.snToggle").removeClass("x_icon-chevron-up").addClass("x_icon-chevron-down"),c.click(function(){var c=a(this),d=a(this).find(">.snToggle"),e=c.closest(".section");e.hasClass("collapsed")?(e.removeClass("collapsed"),d.removeClass("x_icon-chevron-down").addClass("x_icon-chevron-up")):(e.addClass("collapsed"),d.removeClass("x_icon-chevron-up").addClass("x_icon-chevron-down")),b()})}var d=a(".x .x_alert");d.prepend('<button type="button" class="x_close">&times;</button>'),d.children(".x_close").click(function(){a(this).parent(".x_alert").hide()}),a(".x .x_btn").click(function(){return a(this).hasClass("x_disabled")?!1:void 0}),a.fn.vr=function(){this.each(function(){var b=a(this);"|"==b.text()&&b.addClass("vr").filter(":first-child, :last-child").remove()})},a(".x i").vr(),a.fn.labelMaker=function(){this.each(function(b){b+=1;var c=a(this),d="input, textarea, select",e=":radio, :checkbox",f="[id]",g="i"+b;c.next(d).filter(f).not(e).length?c.attr("for",c.next().attr("id")):c.next(d).not(f).not(e).length?c.attr("for",g).next().attr("id",g):c.prev(e).filter(f).length?c.attr("for",c.prev().attr("id")):c.prev(e).not(f).length?c.attr("for",g).prev().attr("id",g):c.children(d).filter(f).length?c.attr("for",c.children(d).filter(f).eq(0).attr("id")):c.children(d).not(f).length&&c.attr("for",g).children(d).not(f).eq(0).attr("id",g)})},a("label:not([for])").labelMaker(),a.fn.checkToggle=function(){function b(){setTimeout(function(){a(":checked").parent("label").addClass("checked"),a(':not(":checked")').parent("label").removeClass("checked")},0)}this.change(b),b()},a(":radio, :checkbox").checkToggle(),a.fn.fileTypeOverlap=function(){this.each(function(){var b=a(this);b.wrap('<span class="fileBtn x_btn" />').before(b.attr("title"))})},a('input[type="file"].overlap').fileTypeOverlap(),a.fn.tableSpan=function(){this.each(function(){var b=a(this),c=b.find(">thead>tr:eq(0)>th").length,d=b.find(">tbody>tr:eq(0)>td:only-child");c!=d.attr("colspan")&&d.attr("colspan",c).css("text-align","center")})},a("table").tableSpan()}),jQuery(function(a){var b=27,c=[],d=1040,e=a('<div class="x_modal-backdrop"></div>').appendTo("body").hide();a.fn.xeModalWindow=function(){this.not(".xe-modal-window").addClass("xe-modal-window").each(function(){a(a(this).attr("href")).addClass("x").hide()}).click(function(){var b,c=a(this);return b=a(c.attr("href")),"showing"==b.data("state")?c.trigger("close.mw"):c.trigger("open.mw"),!1}).bind("open.mw",function(){function f(){k.trigger("after-open.mw")}var g,h,i,j,k=a(this);if(g=a(k.attr("href")),!c.length||c[c.length-1].get(0)!=g.get(0)){if(g.parent("body").length||(h=a('<button type="button" class="x_close">&times;</button>'),h.click(function(){g.data("anchor").trigger("close.mw")}),g.find("[data-hide]").click(function(){g.data("anchor").trigger("close.mw")}),a("body").append(g),g.prepend(h)),g.data("anchor",k),i=a.Event("before-open.mw"),k.trigger(i),i.isDefaultPrevented())return!1;j=k.data("duration")||"fast",g.data("state","showing"),a(document).bind("keydown.mw",function(a){return a.which==b?(k.trigger("close.mw"),!1):void 0}),g.fadeIn(j,f).find("button.x_close:first").focus(),a("body").css("overflow","hidden"),c.push(g);var l=d+2*(c.length-1);e.css("z-index",l).show();var m=e.height(),n=m;n-=g.find(".x_modal-header:visible").height(),n-=g.find(".x_modal-footer:visible").height(),n-=150,g.find(".x_modal-body").css("height",n),g.css("z-index",l+1)}}).bind("close.mw",function(){function b(){i.trigger("after-close.mw")}var f,g,h,i=a(this);if(g=a(i.attr("href")),!c.length||c[c.length-1].get(0)==g.get(0)){if(f=a.Event("before-close.mw"),i.trigger(f),f.isDefaultPrevented())return!1;h=i.data("duration")||"fast",g.data("state","hiding"),g.fadeOut(h,b),a("body").css("overflow","auto"),i.focus(),c.pop();var j=d+2*(c.length-1);c.length?e.css("z-index",j):e.hide()}}),a("div.x_modal").addClass("x")},a("a.modalAnchor").xeModalWindow()}),jQuery(function(a){var b=!1,c=27;a.fn.xeContentToggler=function(){return this.not(".xe-content-toggler").addClass("xe-content-toggler").each(function(){var c=a(this);$layer=a(c.attr("href")),$layer.hide().not(".xe-toggling-content").addClass("xe-toggling-content").mousedown(function(a){b=!0}).focusout(function(a){setTimeout(function(){b||$layer.find(":focus").length||"showing"!=$layer.data("state")||c.trigger("close.tc"),b=!1},1)})}).click(function(){var b,c=a(this);return b=a(c.attr("href")),b.data("anchor",c),"showing"==b.data("state")?c.trigger("close.tc"):c.trigger("open.tc"),!1}).bind("open.tc",function(){function d(){h.trigger("after-open.tc")}var e,f,g,h=a(this);switch(e=a(h.attr("href")),f=h.data("effect"),g=h.data("duration")||"fast",e.data("state","showing"),h.trigger("before-open.tc"),b=!1,a(document).unbind("mousedown.tc keydown.tc").bind("mousedown.tc keydown.tc",function(b){if(b){if("keydown"==b.type&&b.which!=c)return!0;if("mousedown"==b.type){var d=a(b.target);if(d.is("html,.tgAnchor,.tgContent")||e.has(d).length)return!0}}return h.trigger("close.tc"),!1}),f){case"slide":e.slideDown(g,d);break;case"slide-h":var i=e.css({"overflow-x":"",width:""}).width();e.show().css({"overflow-x":"hidden",width:"0px"}).animate({width:i},g,function(){e.css({"overflow-x":"",width:""}),d()});break;case"fade":e.fadeIn(g,d);break;default:e.show(),h.trigger("after-open.tc")}}).bind("close.tc",function(){function b(){f.trigger("after-close.tc")}var c,d,e,f=a(this);switch(a(document).unbind("mousedown.tc keydown.tc"),c=a(f.attr("href")),d=f.data("effect"),e=f.data("duration")||"fast",c.data("state","hiding"),f.trigger("before-close.tc"),d){case"slide":c.slideUp(e,b);break;case"slide-h":c.animate({width:0},e,function(){c.hide(),b()});break;case"fade":c.fadeOut(e,b);break;default:c.hide(),f.trigger("after-close.tc")}}),this},a("a.tgAnchor").xeContentToggler()}),jQuery(function(a){a.fn.xeModuleFinder=function(){return this.not(".xe-module-finder").addClass("xe-module-finder").find("a.tgAnchor.findsite").bind("before-open.tc",function(){function b(b){var e,f,g,h=b.site_list;if(d.empty(),c.closest(".modulefinder").find(".moduleList,.moduleIdList").attr("disabled","disabled"),b.error||!a.isArray(h))return void c.trigger("close.tc");for(f=0,g=h.length;g>f;f++)e=a("<li />").appendTo(d),a('<button type="button" />').text(h[f].domain).data("site_srl",h[f].site_srl).appendTo(e)}var c,d,e;c=a(this),d=a(c.attr("href")).find(">ul"),e=c.prev("input:text").val(),a.exec_json("admin.getSiteAllList",{domain:e},b)}).end().find(".tgContent.suggestion").delegate("button","click",function(){function b(b){var c,e,f=b.module_list;if(!b.error&&f){c=d.find(".moduleList").data("module_list",f).removeAttr("disabled").empty();for(e in f)f.hasOwnProperty(e)&&a("<option />").attr("value",e).text(f[e].title).appendTo(c);c.prop("selectedIndex",0).change().focus(),c.is(":visible")||c.slideDown(100,function(){d.find(".moduleIdList:not(:visible)").slideDown(100).trigger("show")}).trigger("show")}}var c,d;c=a(this),d=c.closest(".modulefinder"),d.find("a.tgAnchor.findsite").trigger("close.tc"),a.exec_json("module.procModuleAdminGetList",{site_srl:c.data("site_srl")},b)}).end().find(".moduleList,.moduleIdList").hide().end().find(".moduleList").change(function(){var b,c,d,e;if(b=a(this),d=b.val(),e=b.data("module_list"),e[d]){e=e[d].list,c=b.closest(".modulefinder").find(".moduleIdList").removeAttr("disabled").empty();for(var f in e)e.hasOwnProperty(f)&&a("<option />").attr("value",e[f].module_srl).text(e[f].browser_title).appendTo(c);c.prop("selectedIndex",0).change()}}),this},a(".modulefinder").xeModuleFinder()}),jQuery(function(a){var b=0;_xeModuleSearch=function(){var d=this,e=a(this),f=e.data("multiple");f||(f="");var g="__module_searcher_"+b;return b++,a.exec_json("module.getModuleAdminModuleSearcherHtml",{id:g,is_multiple:f},function(b){function f(a,b){var c;a.find("li div").width(""),a.css("height","auto"),a.css("overflow-y",""),a.height()>b&&(c=a.find("li div"),c.width(c.width()-20+"px"),a.css("height",b+"px"),a.css("overflow-y","auto"))}function h(b){var d,e=new RegExp(b,"ig"),g=j,h=function(a){return'<span class="highlight">'+a+"</span>"};for(o.empty(),i=0,c=g.length;i<c;i++){if(d=g[i].domain,b){if(!d.match(e))continue;d=d.replace(e,h)}$li=a("<li />").appendTo(o),a("<a>").attr("href","#").html(d).data("site_srl",g[i].site_srl).appendTo($li)}f(o,s-r.parent("div").height()),1==g.length&&o.find("a").trigger("click")}if(b&&b.html){e.after(b.html).addClass("tgAnchor").attr("href","#"+g).xeContentToggler();var j,k=e.next(".moduleWindow"),l=k.find(".siteList"),m=k.find(".moduleList"),n=k.find(".instanceList"),o=l.find(">ul"),p=m.find(">ul"),q=n.find(">select"),r=k.find("input.siteFinder"),s=280;r.keyup(function(){h(r.val())}),"undefined"==typeof console&&(console={log:function(){}}),e.not(".xe-module-search").addClass("xe-module-search").parent().find(".moduleTrigger").bind("before-open.tc",function(){function b(b){var d=b.site_list;return b.error||!a.isArray(d)?void c.trigger("close.tc"):(j=d,h(r.val()),void r.focus())}var c;c=a(this),o.empty(),q.empty(),m.hide(),n.hide(),a.exec_json("admin.getSiteAllList",{domain:""},b)}),k.find(".siteList>ul").delegate("a","click",function(b){function c(b){var c,e=b.module_list;if(!b.error&&e){for(c in e)e.hasOwnProperty(c)&&($li=a("<li />").appendTo(p),a("<a>").attr("href","#").html(e[c].title).data("moduleInstanceList",e[c].list).appendTo($li));k.find(".moduleList").show(),f(p,s),o.find("li").removeClass("x_active"),d.parent("li").addClass("x_active")}}var d,e;d=a(this),e=d.closest(".moduleSearch"),p.empty(),n.hide(),a.exec_json("module.procModuleAdminGetList",{site_srl:d.data("site_srl")},c),b.preventDefault()}).end().find(".moduleList>ul").delegate("a","click",function(b){var c,e;if(c=a(this),e=c.data("moduleInstanceList")){d.sSelectedModuleType=c.text(),q.empty();for(var g in e)e.hasOwnProperty(g)&&($li=a("<option />").html(e[g].browser_title+" ("+e[g].mid+")").appendTo(q).val(e[g].module_srl).data("mid",e[g].mid).data("module_srl",e[g].module_srl).data("layout_srl",e[g].layout_srl).data("browser_title",e[g].browser_title));n.show(),f(q,s),p.find("li").removeClass("x_active"),c.parent("li").addClass("x_active"),b.preventDefault()}}).end().find(".moduleSearch_ok").click(function(b){var c=[];q.find("option:selected").each(function(){c.push({type:d.sSelectedModuleType,module_srl:a(this).data("module_srl"),layout_srl:a(this).data("layout_srl"),browser_title:a(this).data("browser_title"),mid:a(this).data("mid")})}),e.trigger("moduleSelect",[c]),a(".moduleTrigger").trigger("close.tc"),b.preventDefault()})}}),this},a.fn.xeModuleSearch=function(){a(this).each(_xeModuleSearch)},a.fn.xeModuleSearchHtml=function(){var b=0;return a(this).each(function(){var c=a(this),d=c.attr("id");d||(d="__module_search_"+b),b++;var e=a('<a class="x_btn moduleTrigger">'+xe.cmd_find+"</a>"),f=a('<input type="text" readonly>');c.after(e).after("&nbsp;").after(f).hide(),e.xeModuleSearch(),e.bind("moduleSelect",function(a,b){f.val(b[0].browser_title+" ("+b[0].mid+")"),c.val(b[0].module_srl)}),c.val()&&a.exec_json("module.getModuleAdminModuleInfo",{search_module_srl:c.val()},function(a){a&&a.module_info&&f.val(a.module_info.browser_title+" ("+a.module_info.mid+")")})}),this}}),jQuery(function(a){var b=a.fn.hide;a.fn.hide=function(c,d,e,f){a(this).trigger("hide",[f]),a(this).find(".active").removeClass("active");var g=a(this).attr("id");return a(this).hasClass("col")&&(a(this).next().hide(c,d,e,f),g&&a(this).parent().find('a[href="#'+g+'"]').parent("li.active").removeClass("active")),b.apply(this,arguments)};var c=a.fn.show;a.fn.show=function(b,d,e,f){if(a(this).trigger("show",[f]),a(this).hasClass("col")){a(this).next().hide(b,d,e,f);var g=a(this).parent();setTimeout(function(){g.scrollTo(g.width(),0,{duration:0})},0)}var h=c.apply(this,arguments),i=a(this);return setTimeout(function(){i.trigger("after-show",[f])},0),h}}),jQuery(function(a){a.xeMsgBox={htOptions:{}};var b=a.xeMsgBox.$msgBox=a("<section />").addClass("x_modal _common x").hide().css("z-index",9999);b.html('<button type="button" class="x_close _cancel">&times;</button> <div class="x_modal-header"> <h1 class="_title"></h1> </div> <div class="x_modal-body"> <div class="_text"></div> </div> <div class="x_modal-footer"> <button type="button" class="x_btn x_pull-left _cancel">'+xe.cmd_cancel+'</button> <button type="submit" class="x_btn x_btn-inverse x_pull-right x_btn-primary _ok">'+xe.cmd_confirm+"</button> </div> "),a("body").append(b),b.find("._ok").click(function(){a.xeMsgBox.fnOnOK()}),b.find("._cancel").click(function(){a.xeMsgBox.fnOnCancel()}),b.bind("show",function(){a.xeMsgBox.bVisible=!0,a.xeMsgBox._showFoggy(),a.xeMsgBox.fnOnShow(),b.find("input,button").length>0&&setTimeout(function(){b.find("input,button").each(function(b,c){var d=a(c);return d.is(":visible")?(d.focus(),!1):void 0})},0)}),b.bind("hide",function(){a.xeMsgBox.bVisible=!1,a.xeMsgBox._hideFoggy(),a.xeMsgBox.fnOnHide()}),a(document.body).on("keydown",function(c){a.xeMsgBox.bVisible&&27===c.keyCode&&(b.find("._cancel").click(),c.preventDefault())}),a.xeMsgBox.fnOnOK=function(){"function"==typeof a.xeMsgBox.htOptions.fnOnOK&&a.xeMsgBox.htOptions.fnOnOK()||b.hide()},a.xeMsgBox.fnOnCancel=function(){"function"==typeof a.xeMsgBox.htOptions.fnOnCancel&&a.xeMsgBox.htOptions.fnOnCancel(),b.hide()},a.xeMsgBox.fnOnShow=function(){"function"==typeof a.xeMsgBox.htOptions.fnOnShow&&a.xeMsgBox.htOptions.fnOnShow()},a.xeMsgBox.fnOnHide=function(){"function"==typeof a.xeMsgBox.htOptions.fnOnHide&&a.xeMsgBox.htOptions.fnOnHide()},a.xeMsgBox.showMsgBox=function(c){a('head>link[rel="stylesheet"]:last').after('<link rel="stylesheet" href="./modules/menu/tpl/css/themes/default/style.css" />'),c=a.xeMsgBox.htOptions=c||{};var d=c.sTitle||"",e=c.sText||"",f=c.bDanger||!1;b.find("._title").html(d),b.find("._text").html(e),""===e?b.addClass("_nobody"):b.removeClass("_nobody");var g=b.find("._ok");f?(g.removeClass("x_btn-inverse"),g.addClass("x_btn-danger")):(g.removeClass("x_btn-danger"),g.addClass("x_btn-inverse")),c.bSmall?b.addClass("_small"):b.removeClass("_small"),c.bAlert?b.addClass("_type_alert"):b.removeClass("_type_alert"),b.show()},a.xeMsgBox.alertDialog=function(a){a=a||{},a.bAlert=!0,this.showMsgBox(a)},a.xeMsgBox.alert=function(a){htOptions={bAlert:!0,bNobody:!0,bSmall:!0,sText:a},this.showMsgBox(htOptions)},a.xeMsgBox.confirmDialog=function(a){a=a||{},a.bAlert=!1,this.showMsgBox(a)};var c=a.xeMsgBox.$foggyLayer=a("<div />");c.css({position:"fixed",top:0,left:0,backgroundColor:"#000",opacity:.5,display:"none",zIndex:9998}),a(a.find("body")).append(c),a.xeMsgBox._resizeFoggy=function(){c.css({width:0,height:0}),setTimeout(function(){c.css({width:a(document).width(),height:a(document).height()})},0)},a(window).resize(a.xeMsgBox._resizeFoggy),a.xeMsgBox._resizeFoggy(),a.xeMsgBox._showFoggy=function(){c.show()},a.xeMsgBox._hideFoggy=function(){c.hide()}}),jQuery(function(a){a.xeFoggy={};var b=a.xeFoggy.$foggyLayer=a("<div />");b.css({position:"fixed",top:0,left:0,backgroundColor:"#000",opacity:.5,display:"none",zIndex:9998}),a("body").append(b),a.xeFoggy._resizeFoggy=function(){b.css({width:0,height:0}),setTimeout(function(){b.css({width:a(document).width(),height:a(document).height()})},0)},a(window).resize(a.xeFoggy._resizeFoggy),a.xeFoggy._resizeFoggy(),a.xeFoggy.show=function(a){a?b.css({opacity:0}):b.css({opacity:.5}),b.show()},a.xeFoggy.hide=function(){b.hide()}}),jQuery(function(a){var b=!1,c=a('<tr class="placeholder"><td>&nbsp;</td></tr>');a.fn.xeSortableTable=function(){return this.not(".xe-sortable-table").addClass("xe-sortable-table").delegate("button.dragBtn","mousedown.st",function(d){var e,f,g,h,i,j,k,l,m,n,o,p;if(1==d.which){if(e=a(this),f=e.closest("tr"),g=e.closest("table"),p=g.get(0).offsetParent,i=f.height(),j=f.width(),before_event=a.Event("before-drag.st"),g.trigger(before_event),before_event.isDefaultPrevented())return!1;l={x:d.pageX,y:d.pageY},k=getOffset(f.get(0),p),$clone=f.attr("target",!0).clone(!0).appendTo(g),o=(h=g.find("thead th")).length,h.filter("[colspan]").attr("colspan",function(a,b){o+=b-1}),c.find("td").attr("colspan",o),m=[],g.find("tbody>tr:not([target],.sticky,:hidden)").each(function(){var b,c=a(this);b=getOffset(this,p),m.push({top:b.top,bottom:b.top+c.height(),$item:c})}),$clone.addClass("draggable").css({position:"absolute",opacity:.6,width:j,height:i,left:k.left,top:k.top,zIndex:100}),c.css({position:"absolute",opacity:.6,width:j,height:"10px",left:k.left,top:k.top,backgroundColor:"#bbb",overflow:"hidden",zIndex:99}).appendTo(g),f.css("opacity",.6),a(document).unbind("mousedown.st mouseup.st").bind("mousemove.st",function(a){var b,d,e,f,g;for(n=null,b={x:l.x-a.pageX,y:l.y-a.pageY},d=k.top-b.y,e=0,f=m.length;f>e;e++)g=m[e],e&&g.top>d||f-1>e&&g.bottom<d||(n={element:g.$item},g.top>d-12?(n.state="before",c.css("top",g.top-5)):(n.state="after",c.css("top",g.bottom-5)));$clone.css({top:d})}).bind("mouseup.st",function(d){var e;b=!1,a(document).unbind("mousemove.st mouseup.st"),f.removeAttr("target").css("opacity",""),$clone.remove(),c.remove(),n&&(e=a(n.element),e[n.state](f),g.trigger("after-drag.st"))})}}),this},a("table.sortable").xeSortableTable()}),jQuery(function(a){a(".filebox").bind("before-open.mw",function(){function b(e){d.html(e.html),d.find(".select").bind("click",function(b){var d=a("input.select_checkbox:checked");if(0===d.length){var e=a(this).closest("tr").find("img.filebox_item").attr("src");e?(c.trigger("filebox.selected",[e]),c.trigger("close.mw")):alert("None selected!")}else c.trigger("filebox.selected",[d]),c.trigger("close.mw");return!1}),d.find(".x_pagination").find("a").filter(function(){return a(this).data("toggle")?!1:a(this).parent().hasClass("x_disabled")?!1:!a(this).parent().hasClass("x_active")}).bind("click",function(){var c=a(this).attr("page");return a.exec_json("module.getFileBoxListHtml",{page:c},b),!1}),a("#goToFileBox").find("button").bind("click",function(){var c=a(this).prev("input").val();return a.exec_json("module.getFileBoxListHtml",{page:c},b),!1}),d.closest(".x_modal-body").scrollTop(0)}var c,d,e;c=a(this),e=c.attr("href"),d=a(e).find(".filebox_list"),a.exec_json("module.getFileBoxListHtml",{page:"1"},b)});var b=a(".x .dsTg .__simple"),c=a(".x .dsTg .__detail"),d=a(".x .dsTg td.title");d.each(function(){var b=a(this);0===b.find("p.x_alert").length&&b.addClass("tg").find(">*:not(:first-child)").hide()});var e=a(".x .dsTg td.tg>*:not(:first-child)");b.click(function(){e.hide(),c.removeClass("x_active"),b.addClass("x_active")}),c.click(function(){e.show(),c.addClass("x_active"),b.removeClass("x_active")})}),jQuery(function(a){a.fn.xeMultilingualWindow=function(b){function c(){return o.is(":visible")&&q&&confirm(xe.msg_confirm_save_and_use_multilingual)&&o.find(".save-useit").trigger("click"),!0}function d(){if(p.is(":visible")&&p.find(".editMode").length){var a=p.find(".editMode");confirm(xe.msg_confirm_save_and_use_multilingual)?a.find(".save").trigger("click"):a.find(".cancel").trigger("click")}return!0}function e(){return p.find(".item > fieldset").hide().prev("a").children("i").removeClass("x_icon-chevrom-up").addClass("x_icon-chevron-down"),n.find('[href="#lang_create"]').trigger("click"),o.find(".editMode").children("textarea").val(""),q=!1,!0}function f(a){a?(i(1,xe.current_lang,"",a,!1),n.find('[href="#lang_search"]').trigger("click",!0)):i(1,xe.current_lang,"","",!1)}function g(){return c()&&d()&&e()?void 0:!1}function h(a,b){var c=n.data("lang-target");q=!1,c&&c.trigger("selected.g11n",[a,b])}function i(c,d,e,f,g){"undefined"==typeof c&&(c=1),"undefined"==typeof d&&(d=xe.current_lang),"undefined"==typeof e&&(e=""),"undefined"==typeof f&&(f=""),"undefined"==typeof g&&(g=!0),a.exec_json("module.getModuleAdminLangListHtml",{page:c,lang_code:d,search_keyword:e,name:f,list_count:b.list_count,mid:current_url.getQuery("mid")},function(b){b&&b.html&&(p.html(b.html),j(),k(),l(),m(),g&&(document.location.href="#lang_search"),f&&a("#lang_search").find('[href^="#lang-"]').trigger("click"))})}function j(){p.find(".x_pagination a").click(function(){var b=a(this).data("page"),c=a(this).data("search_keyword"),d=a(this).data("current_lang");return b?(i(b,d,c),!1):void 0}),p.find(".x_pagination").submit(function(){var b=a(this).find('[name="page"]').val(),c=a(this).data("search_keyword"),d=a(this).data("current_lang");return b?(i(b,d,c),!1):!1})}function k(){p.find(".search").submit(function(){var b=a(this).find('[name="search_keyword"]').val(),c=a(this).find('[name="lang_code"]').val();return i(1,c,b),!1}),p.find("#search_cancel").click(function(){i(1,xe.current_lang,"")})}function l(){p.find(".set").append('<i class="x_icon-chevron-down"></i>').click(function(){function b(b){var d=c.next("fieldset").find("textarea");d.each(function(){var c=a(this),d=b.langs[c.data("lang")],e=/^\$user_lang->/;e.test(d)?c.val("").data("value",""):c.val(d).data("value",d)}),c.data("is_loaded",!0)}var c=a(this),e=c.data("lang_code");d();var f="x_icon-chevron-up",g="x_icon-chevron-down";c.next("fieldset").is(":visible")?c.children("i").removeClass(f).addClass(g):(c.parent(".item").siblings(".item").find("a > i").removeClass(f).addClass(g).end().children("fieldset").hide(),c.children("i").removeClass(g).addClass(f)),"undefined"==typeof c.data("is_loaded")&&a.exec_json("module.getModuleAdminLangCode",{name:e,mid:current_url.getQuery("mid")},b)})}function m(){b.view_use||p.find(".useit").hide(),b.view_modify||p.find(".modify").hide(),b.view_delete||p.find(".delete").hide(),"save"==b.modify_type&&p.find(".save").text(xe.cmd_save),p.find(".modify").click(function(){a(this).closest("fieldset").addClass("editMode").find("textarea").removeAttr("disabled"),a(this).siblings(".cancel").prependTo(a(this).parent()),a(this).siblings(".delete").attr("disabled","disabled")}),p.find(".cancel").click(function(){return a(this).closest("fieldset").removeClass("editMode").find("textarea").attr("disabled","disabled").each(function(){var b=a(this);b.val(b.data("value"))}),a(this).siblings(".modify").prependTo(a(this).parent()),a(this).siblings(".delete").removeAttr("disabled"),!1}),p.find(".delete").click(function(){if(confirm(xe.confirm_delete)){var b=a(this);lang_name=b.closest(".item").find('[href^="#lang-"]').data("lang_code"),a.exec_json("module.procModuleAdminDeleteLang",{name:lang_name,mid:current_url.getQuery("mid")},function(a){if(a){if(a.error)return void alert(a.message);var b=p.find(".x_pagination"),c=b.data("page"),d=b.data("search_keyword"),e=b.data("lang_code");c||($page=1),i(c,e,d)}})}}),p.find(".item").submit(function(){var b=a(this),c=b.find(".editMode").children("textarea"),d=b.find('[href^="#lang-"]'),e={},f=null;return c.each(function(){var b=a(this);e[b.attr("class")]=b.val(),b.data("tmp_value",b.val()),xe.current_lang==b.attr("class")&&(f=b.val())}),e.lang_name=d.data("lang_code"),e.mid=current_url.getQuery("mid"),a.exec_json("module.procModuleAdminInsertLang",e,function(e){e&&!e.error&&e.name&&(c.each(function(){var b=a(this);b.data("value",b.data("tmp_value"))}),d.children("span").html(f),p.find(".cancel").trigger("click"),b.find(".useit").trigger("click"))}),!1}),p.find(".useit").click(function(){var b=a(this),c=b.closest(".item").find('[href^="#lang-"]'),d=c.data("lang_code"),e=c.children("span").text();h(d,e)})}var n=a(this),o=n.find("#lang_create"),p=n.find("#lang_search"),q=!1;return b=a.extend({create_type:"save_and_use",modify_type:"save_and_use",view_use:!0,view_modify:!0,view_delete:!1,list_count:5},b||{}),"save_and_use"!=b.create_type&&o.find(".save-useit").text(xe.cmd_save),n.find(".x_tabbable").xeTabbable(),o.find(".editMode textarea").change(function(){q=!0}),o.submit(function(){function c(a){a&&!a.error&&a.name&&("save_and_use"==b.create_type?h(a.name,g):(alert(a.message),e()))}var d=a(this),f={},g=null;return d.find(".editMode").children("textarea").each(function(){var b=a(this);f[b.attr("class")]=b.val(),xe.current_lang==b.attr("class")&&(g=b.val())}),g?(f.mid=current_url.getQuery("mid"),a.exec_json("module.procModuleAdminInsertLang",f,c),!1):(alert(xe.msg_empty_multilingual),!1)}),n.find('[href="#lang_search"]').click(function(a,b){"undefined"==typeof b&&i()}),n.bind("reset.g11n",function(){e()}),n.bind("before-open.g11n",function(a,b){f(b)}),n.bind("before-close.g11n",function(){return g()}),this}});var is_loaded_multilingual_window_html=!1;jQuery(function(a){a.fn.xeLoadMultilingualWindowHtml=function(){function b(b){var c=a("#content");a(b.html).appendTo(c).xeMultilingualWindow(),a(".lang_code").trigger("loaded-multilingualWindow")}return a.exec_json("module.getModuleAdminMultilingualHtml",{mid:current_url.getQuery("mid")},b),this}});var multilingual_id_count=0;jQuery(function(a){a.fn.xeApplyMultilingualUI=function(){return a(this).each(function(){function b(){function b(){g.val(l.val()).width(g.data("width")).removeAttr("disabled").data("active",!1),g.parent(".g11n").removeClass("active")}function f(){function c(a){if(a&&a.langs){var b=g.width();g.closest(".g11n").addClass("active"),g.val(a.langs[xe.current_lang]).attr("disabled","disabled").width(b-44).data("active",!0)}}b();var d=/^\$user_lang->/;d.test(g.val())&&a.exec_json("module.getModuleAdminLangCode",{name:g.val().replace("$user_lang->",""),mid:current_url.getQuery("mid")},c)}var g,h=a("#g11n"),i=c.width();g="TEXTAREA"==d.tagName||"textarea"==c.data("type")?a('<textarea id="lang_'+e+'" class="lang_code" style="width:'+i+'px" data-width="'+i+'">').data("lang-id",e):a('<input type="text" id="lang_'+e+'" class="lang_code" style="width:'+(i-28)+'px" data-width="'+(i-28)+'">').data("lang-id",e),g.attr("placeholder",c.attr("placeholder"));var j=a('<button type="button" class="x_add-on remover" title="'+xe.cmd_remove_multilingual_text+'"><i class="x_icon-remove"></i>'+xe.cmd_remove_multilingual_text+"</button>").data("lang-target",e),k=a('<a href="#g11n" class="x_add-on modalAnchor" title="'+xe.cmd_set_multilingual_text+'"><i class="x_icon-globe"></i>'+xe.cmd_set_multilingual_text+"</a>").data("lang-target",e);c.parent().addClass("g11n").addClass("x_input-append"),c.after(g,j,k),c.hide(),k.attr("href","#g11n").xeModalWindow(),g.bind("selected.g11n",function(a,b,c){var d=g.width();g.data("active")||(d-=44),g.width(d).attr("disabled","disabled").val(c).data("active",!0).parent(".g11n").addClass("active"),g.siblings("#"+g.data("lang-id")).val("$user_lang->"+b),k.trigger("close.mw")}),k.bind("open.mw",function(){a(this);g.data("active")?h.trigger("before-open.g11n",g.prev(".lang_code").val().replace("$user_lang->","")):h.trigger("before-open.g11n"),h.data("lang-target",g)}),k.bind("before-close.mw",function(){return h.trigger("before-close.g11n")}),j.click(function(){var b=a(this),c=a("#lang_"+b.data("lang-target"));if(c.data("active")){var d=c.width();c.val("").removeAttr("disabled").width(d+44).data("active",!1).parent(".g11n").removeClass("active"),b.siblings(".lang_code").val("")}});var l=c;g.bind("change keyup",function(){c=a(this),c.data("active")||l.val(c.val())}),c.bind("reload-multilingual",f),f()}is_loaded_multilingual_window_html||(a().xeLoadMultilingualWindowHtml(),is_loaded_multilingual_window_html=!0);
var c=a(this),d=this;c.parent().hasClass("g11n")?c.siblings().remove():c.wrap("<span></span>");var e=c.attr("id");e||(e="__lang_code_"+multilingual_id_count,multilingual_id_count++,c.attr("id",e)),a("#g11n").length?b():c.bind("loaded-multilingualWindow",b)}),this},a('.vLang[type="hidden"]').each(function(){var b=a(this);b.next("textarea.vLang").length&&b.data("type","textarea"),b.removeClass("vLang").addClass("lang_code"),b.parent().find(".editUserLang").remove().end().find(".vLang").remove()}),a(".lang_code").xeApplyMultilingualUI()}),jQuery._xeAdminVar=jQuery._xeAdminVar||{},jQuery(function(a){function b(a){var b=jQuery,e=a.menuList,f=d(e,0,"menuSelector_menuTree","menuSelector_menuTreeNode");g.html(f),k=b.xeMenuSelectorVar.bMultiSelect;var h={plugins:["themes","html_data","ui","crrm"],crrm:{move:{check_move:function(a){var b=this._get_parent(a.o);return-1===b?!1:(b=this._get_parent(a.np),!!b)}}},core:{}};k||(h.ui={select_multiple_modifier:!1}),g.jstree(h).bind("loaded.jstree",function(a,d){d.inst.open_all();var e=b._xeAdminVar.sRenameOnload;b._xeAdminVar.sRenameOnload=null;var f=b._xeAdminVar.sSelectOnload;if(b._xeAdminVar.sSelectOnload=null,e&&(b("#siteMapTree").jstree("rename",b("#menu"+e)),b("#menu"+e)[0].scrollIntoView(!0)),f){var g=b("#menu"+f)[0];g&&(b("#siteMapTree").jstree("select_node",b(g)),g.scrollIntoView(!0))}b(this).find("A._menu_node").filter(function(a,d){var e=b(d);c(e)||e.css("opacity","0.2")})}).bind("select_node.jstree",function(a,b){}).bind("before.jstree",function(a,d){return"select_node"!=d.func||($node=b(d.args[0]),c($node))?void 0:(a.stopImmediatePropagation(),!1)}),g.find("._nodeType_1, ._nodeType_3").parent("li").addClass("x_disabled")}function c(b){var c=a.parseJSON(b.attr("data-param"));return a.xeMenuSelectorVar.aAllowedType.length>0&&a.inArray(c.sType,a.xeMenuSelectorVar.aAllowedType)<0?!1:!(a.inArray(c.sType,a.xeMenuSelectorVar.aDisallowedType)>-1)}function d(a,b,c,e){var f=jQuery;if(c=c||"menuSelector_menuTree",e=e||"menuSelector_menuTreeNode",0===a.length)return"";for(var g,h,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x="",y=0,z=a.length;z>y;y++){switch(a[y].sParentSrl=b,v="",u=a[y].menuSrl?1:2,q="",u){case 1:p=a[y].title,m=a[y].menuSrl,s=a[y].menuItems.list,w="#propertiesRoot",t="_ROOT";break;case 2:p=a[y].text,l=a[y].link,q=a[y].url,m=a[y].node_srl,k=a[y].expand,n=a[y].open_window,o=a[y].selected,g=a[y].active_btn,h=a[y].normal_btn,j=a[y].hover_btn,r=a[y].is_start_module,s=a[y].list,t=a[y].module_type,sModule=a[y].module,w="#properties","Y"===a[y].is_shortcut?(t="_SHORTCUT",q="",a[y].bShortCut=!0):a[y].bShortCut=!1}i[m]=a[y],i[m].aNode=s||[],i[m].nNodeType=u,i[m].sNodeSrl=m,i[m].sText=p,i[m].sMenuNameKey=i[m].menu_name_key,i[m].sModuleSrl=v=i[m].module_srl,i[m].sModuleType=t,sSubTree="",s&&s.length>0&&(sSubTree=d(s,m,c,e));var A=p;r&&(A+=" ${h}"),"_SHORTCUT"===i[m].sModuleType&&(A+=" ${s}",u=3);var B=f.tmpl(e,{MenuTitleWithHome:A,MenuTitle:p,MenuId:m,MenuUrl:q,NodeType:u,MenuType:t,SubTree:sSubTree,Target:w,ModuleSrl:v}).data("sMenuId",m).data("sMenuUrl",q).data("sMenuTitle",p).data("sMenuType",t);x+=B[0].outerHTML.replace("${h}","<i class='x_icon-home' title='Home Page'>[HOME]</i>").replace("${s}","<i class='x_icon-share' title='Shortcut'></i>")}return f.tmpl(c,{Nodes:x}).get()[0].outerHTML}function e(b){var c=a(b.target);a.xeMenuSelectorVar.bMultiSelect=""+c.data("multiple")=="true",a.xeMenuSelectorVar.aAllowedType=a.grep((""+(c.data("allowedType")||"")).split(","),function(a){return""!==a}),a.xeMenuSelectorVar.aDisallowedType=a.grep((""+(c.data("disallowedType")||"")).split(","),function(a){return""!==a}),a.xeMenuSelectorVar.aDisallowedType.push("_ROOT"),a.xeMenuSelectorVar.aDisallowedType.push("_SHORTCUT"),a.inArray("page",a.xeMenuSelectorVar.aAllowedType)>-1&&a.xeMenuSelectorVar.aAllowedType.push("ARTICLE","WIDGET","OUTSIDE"),a.inArray("page",a.xeMenuSelectorVar.aDisallowedType)>-1&&a.xeMenuSelectorVar.aDisallowedType.push("ARTICLE","WIDGET","OUTSIDE"),a.xeMenuSelectorVar.$container=a.xeMsgBox.$msgBox,a.xeMsgBox.confirmDialog({sTitle:xe.msg_select_menu,sText:'<select class="site_selector" style="width:100%;display:none"></select><div class="tree"></div>',bSmall:!0,bDanger:!0,fnOnOK:function(){var b=[];g.find(".jstree-clicked").each(function(c,d){var e=a.parseJSON(a(this).attr("data-param"));b.push({browser_title:e.sMenuTitle,mid:e.sMenuUrl,module_srl:e.sModuleSrl,menu_id:e.sMenuId,type:e.sType})}),c.trigger("moduleSelect",[b])}}),a.exec_json("admin.getSiteAllList",{domain:""},f)}function f(b){var c=b.site_list;g=a.xeMenuSelectorVar.$container.find(".tree");var d=a.xeMenuSelectorVar.$container.find(".site_selector"),e=c.length;if(1>=e)d.hide();else{d.html("");for(var f=0;e>f;f++)d.append(a("<option>").val(c[f].site_srl).html(c[f].domain));d.show()}a.xeShowMenuSelector(g,"0")}var g,h,i,j,k;a.xeMenuSelectorVar={bMultiSelect:!1},a.template("menuSelector_menuTree","<ul>{{html Nodes}}</ul>"),a.template("menuSelector_menuTreeNode",'<li> <a href="#" class="_nodeType_${NodeType} _menu_node _menu_url_${MenuUrl}" data-param=\'{ "sMenuId":"${MenuId}", "sMenuUrl":"${MenuUrl}", "sMenuTitle":"${MenuTitle}", "sType":"${MenuType}", "sModuleSrl":"${ModuleSrl}" }\'>${MenuTitle}</a> {{html SubTree}} </li>'),a.xeShowMenuSelector=function(a,c,d,e){var f=jQuery,k={menu_srl:0,site_srl:c};g=a,h=e,j=d,i={},f.exec_json("menu.getMenuAdminSiteMap",k,b)},a.xeShowMenuSelectorIn=function(b){a.xeMenuSelectorVar.$container=b;var c=b;a.xeMenuSelectorVar.bMultiSelect=""+c.data("multiple")=="true",a.xeMenuSelectorVar.aAllowedType=a.grep((""+(c.data("allowedType")||"")).split(","),function(a){return""!==a}),a.xeMenuSelectorVar.aDisallowedType=a.grep((""+(c.data("disallowedType")||"")).split(","),function(a){return""!==a}),a.xeMenuSelectorVar.aDisallowedType.push("_ROOT"),a.xeMenuSelectorVar.aDisallowedType.push("_SHORTCUT"),b.not("._eventBound").addClass("_eventBound").on("change",".site_selector",function(c){var d=a(this).val();a.xeShowMenuSelector(b.find(".tree"),d),b.trigger("site_changed")}),a.exec_json("admin.getSiteAllList",{domain:""},f)},a.fn.xeMenuSearchHtml=function(){var b=0;return a(this).each(function(){var c=a(this),d=c.attr("id");d||(d="__module_search_"+b),b++;var f=c.attr("data-multiple"),g=c.attr("data-allowedType"),h=c.attr("data-disallowedType"),i=a('<a class="x_btn moduleTrigger">'+xe.cmd_find+"</a>");i.data("multiple",f),i.data("allowedType",g),i.data("disallowedType",h);var j=a('<input type="text" readonly>');c.after(i).after("&nbsp;").after(j).hide(),i.data("multiple",a(this).data("multiple")),i.on("click",e),i.bind("moduleSelect",function(a,b){j.val(b[0].browser_title+" ("+b[0].mid+")"),c.val(b[0].module_srl)}),c.val()&&a.exec_json("module.getModuleAdminModuleInfo",{search_module_srl:c.val()},function(a){a&&a.module_info&&j.val(a.module_info.browser_title+" ("+a.module_info.mid+")")})}),this},$msgBox=a(".x_modal._common"),$msgBox.on("change",".site_selector",function(b){var c=a(this).val();a.xeShowMenuSelector(g,c)}),a.fn.xeMenuSearch=function(){a(this).each(function(b,c){a(c).on("click",e)})},a(".module_search").xeMenuSearchHtml(),a(".moduleTrigger").xeMenuSearch()}),jQuery(function(a){try{window.alert=function(){return a.xeMsgBox.alert.apply(a.xeMsgBox,arguments)},setTimeout(function(){a("div.message.info").fadeOut(1e3)},2500)}catch(b){}}),jQuery(function(a){a("#site,.x_modal._common").on("keydown","input",function(b){var c,d;if(13===b.keyCode)for(c=a(b.target).parent();c&&!c.hasClass("col");){if(d=c.find("button.x_btn-primary,button.x_btn-inverse"),d.length>0){a(b.target).hasClass("lang_code")&&a(b.target).blur(),b.preventDefault(),d.click();break}c=c.parent()}})});