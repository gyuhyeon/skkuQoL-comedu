<!--// XE ver.1.2.x 게시판을 이용한 플래너/음력달력-----------------------
##
## @Package:    xe_official_planner123 (board skin)
## @File name:	_style.planner_simple.html
## @Author:     Keysung Chung (keysung2004@gmail.com)
## @Copyright:  © 2009 Keysung Chung(keysung2004@gmail.com)
## @Contributors: Clements J. SONG (http://clements.kyunggi.ca/ , clements_song@hotmail.com)
## @Release:	under GPL-v2 License.
## @License:	http://www.opensource.org/licenses/gpl-2.0.php
##
## Redistribution and use in source and binary forms, with or without modification,
## are permitted provided that the following conditions are met:
##
## Redistributions of source code must retain the above copyright notice, this list of
## conditions and the following disclaimer.
## Redistributions in binary form must reproduce the above copyright notice, this list
## of conditions and the following disclaimer in the documentation and/or other materials
## provided with the distribution.
##
## Neither the name of the author nor the names of contributors may be used to endorse
## or promote products derived from this software without specific prior written permission.
##
## THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY
## EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
## MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE
## COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
## EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE
## GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED
## AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
## NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED
## OF THE POSSIBILITY OF SUCH DAMAGE.
##
## [author]
##  - Keysung Chung, 2009, 07, 28
##  - http://chungfamily.woweb.net/
## [changes]
##  - PlannerXE123 ver. 5.0.0 : Keysung Chung, 2015, 11, 05
##  - PlannerXE123 ver. 4.6.0 : Keysung Chung, 2014, 11, 01
##  - PlannerXE123 ver. 4.3.0 : Keysung Chung, 2014, 01, 01
##  - PlannerXE123 ver. 4.1.0 : Keysung Chung, 2013, 03, 12
##  - PlannerXE123 ver. 4.0.0 : Keysung Chung, 2011, 08, 01
##  - PlannerXE123 ver. 3.3.0 : Keysung Chung, 2010, 12, 12
##  - PlannerXE123 ver. 3.2.0 : Keysung Chung, 2010, 10, 31
##  - PlannerXE123 ver. 3.1.0 : Keysung Chung, 2010, 10, 12
##  - PlannerXE123 ver. 2.1.0 : Keysung Chung, 2010, 09, 13
##  - PlannerXE123 ver. 2.0.0 : Keysung Chung, 2010, 09, 01
##  - PlannerXE123 ver. 1.7.0 : Keysung Chung, 2010, 08, 01
##  - PlannerXE123 ver. 1.6.0 : Keysung Chung, 2010, 07, 01
##  - PlannerXE123 ver. 1.5.0 : Keysung Chung, 2010, 06, 15
##  - PlannerXE123 ver. 1.4.0 : Keysung Chung, 2010, 06, 01
##  - PlannerXE123 ver. 1.3.0 : Keysung Chung, 2010, 05, 15
##  - PlannerXE123 ver. 1.2.0 : Keysung Chung, 2010, 05, 01
##  - PlannerXE123 ver. 1.1.0 : Keysung Chung, 2010, 04, 14
##  - PlannerXE123 ver. 1.0.0 : Keysung Chung, 2010, 04, 01
##  - PlannerXE123 ver. 0.3 : Keysung Chung, 2010, 02, 28
##  - PlannerXE123 ver. 0.2 : Keysung Chung, 2009, 11, 09
##	- PlannerXE123 ver. 0.1 : Keysung Chung, 2009, 07, 28
----------------------------------------------------------------------- -->
<!--// **************************************************************** -->
<!--#include("./_get_schedule.html")-->
<!--// **************************************************************** -->
<div id='planner123' class="planner123">
{@ $theme_name = $module_info->user_colorset;}
<!--@if($theme_name && file_exists($tpl_path.'colorset/'.$theme_name.'.html'))--><!--//theme header-->
{@ $oTemplate = &TemplateHandler::getInstance();}
{@ print $oTemplate->compile($tpl_path.'colorset/', $theme_name.'.html');}
<!--@else-->
<!--#include("./_header_planner.html")-->
<!--@end-->
<!--@if($ind_use_category == "Y" && count($category_list) && $module_info->display_category_button != "N")--><!--// 카테고리 탭 출력 -->
<!--@foreach($category_list as $val)-->
{@ $tmp_cartegory[$val->title] = array('title' => $val->title, 'category_srl' => $val->category_srl, 'color' => $val->color, 'grant' => $val->grant, 'selected' => $val->selected, 'document_count' => $val->document_count, 'depth' => $val->depth)}
<!--@end-->
{@ ksort($tmp_cartegory)}
<div class="category_navigation">
{@ $label_cat_all=$lang->pln_cat_all}
<button title="{$label_cat_all}" type="button" id="btn_all" onclick="doChgCategory(); return false;" class="button2"><!--@if(!$category)--><span class="strong"><!--@else--><span><!--@end-->{$label_cat_all}</span></button>
<!--@foreach($tmp_cartegory as $val)-->
<button title="{$val['title']}" type="button" id={$val['title']} onclick="doChgCategory({$val['category_srl']}); return false;" class="button2" style="<!--@if($val['color'] != transparent)-->color:{$val['color']};<!--@end-->" > <!--@if($category == $val['category_srl'])--><span class="strong" ><!--@else--><span><!--@end-->{$val['title']}</span></button>
<!--@end-->
</div>
<!--@end-->
{@ $weekDayTitle_arr = explode(",",$lang->pln_calendar_header);// 요일 이름(V500) }
<!--@if($module_info->column_width == null)--><!--// 요일별 컬럼 폭(V500) -->
{@ $th_width_arr = array('14%', '14%', '14%', '14%', '14%', '14%', '14%');//디폴트:14%(일,월,화....토) }
<!--@else-->
{@ $th_width_arr= explode(",",$module_info->column_width);//입력 값 }
<!--@end-->
{@
$tbl_html .=  "<table class='planner_calendar' summary='PlannerXE123'>";// 달력
$tbl_html .=  "<thead>";
$tbl_html .=  "<tr>";
}
<!--@for($x=0; $x<7; $x++)--><!--// 달력 헤더 -->
{@ $WDay_seq = ($firstDayOfWeek + $x) % 7;}
<!--@if($WDay_seq == 0)-->
{@ $tbl_html .=  "<th scope='col' width='".$th_width_arr[$WDay_seq]."'><div class='wd_border holiday'><div class='wd_title'>".$weekDayTitle_arr[$WDay_seq]."</div></div></th>"; }
<!--@elseif($WDay_seq == 6)-->
{@ $tbl_html .=  "<th scope='col' width='".$th_width_arr[$WDay_seq]."'><div class='wd_border saturday'><div class='wd_title'>".$weekDayTitle_arr[$WDay_seq]."</div></div></th>"; }
<!--@else-->
{@ $tbl_html .=  "<th scope='col' width='".$th_width_arr[$WDay_seq]."'><div class='wd_border'><div class='wd_title'>".$weekDayTitle_arr[$WDay_seq]."</div></div></th>"; }
<!--@end-->
<!--@end-->
{@
$tbl_html .=  "</tr>";
$tbl_html .=  "</thead>";
$tbl_html .=  "<tbody>";
$schedule_html = null;
$holiday_html = null;
$memday_html = null;
$count_seg = 0;
$weekcount = count($Calmain);
}
<!--@for($i=0; $i<$weekcount; $i++)-->
{@ $tbl_html .= "<tr id='planner_week".$i."'>";}
<!--@for($j=0; $j<7; $j++)-->
{@
$wrk_tmp_arr= explode("-",$Calmain[$i][$j]);
$Calmain_YY = $wrk_tmp_arr[0];
$Calmain_MM = $wrk_tmp_arr[1];
$Calmain_DD = $wrk_tmp_arr[2];
}
<!--@if($Calmain_YY == $todayYY && $Calmain_MM == $todayMM && $Calmain_DD == $todayDD)-->
{@ $tbl_html .= "<td class='today_bg drop'>";}
<!--@else-->
<!--@if($Calmain[$i][$j]== "*")--><!--// 날자 없을때-->
{@ $tbl_html .= "<td bgcolor=".$day_bgcolor.">";}
<!--@else-->
{@ $tbl_html .= "<td class='drop' bgcolor=".$day_bgcolor.">";}
<!--@end-->
<!--@end-->
{@
$tbl_html .= " <div class='planner_calendar_inner'>";
$tmpfld_1 = null;
$outtext = null;
}
<!--@if($Calmain[$i][$j] == "*")--><!--// 날자 없을때-->
{@ $Calmain_DD=null;}
<!--@if($i==0 && $j==0)--><!--// 첫주 첫칸이 날자없으면-->
{@
$tbl_html .= "<div style='margin:0; height:18px;'>&nbsp;</div>";// 빈 날자 레이블 출력
$tbl_html .= "<div id='week_schedule_".$i."' style='position:relative;'></div>";// 첫주 장기일정 콘테이너
}
<!--@end-->
<!--@else--><!--// 날자 있을때-->
{@
$tempday=$Calmain_DD;
$tmparr_lunar=explode(",",$Lunarday[$Calmain_MM][$Calmain_DD]);//음력날자(2014-07-01 "-"를 ","로변경)
}
<!--@if($tmparr_lunar[3] == "윤달")-->{@ $youndal = "윤";}<!--@else-->{@ $youndal = null;}<!--@end-->
{@
$tmpfld_lunar ="(".$youndal.$tmparr_lunar[1]."-".$tmparr_lunar[2].")";
$tmparr4=explode("-",$Holiday[$Calmain_MM][$Calmain_DD]);// 공휴일
$tmparr5=explode("-",$Memday[$Calmain_MM][$Calmain_DD]);// 기념일
$tmparr6=explode("|#&Oslash;#|",$arr_plan[$Calmain_MM][$Calmain_DD]);// 일정/플랜  1차 "|#&Oslash;#|",로 분리
}
<!--@if(($j==0 || $Calmain_DD==1) && ($pOption == 'W1' || $pOption == 'W2' || $ind_weekly_base > 0))-->
{@ $tmp_dsp_mmdd = $Calmain_MM."/".$Calmain_DD;}
<!--@else-->
{@ $tmp_dsp_mmdd = $Calmain_DD;}
<!--@end-->
{@ $WDay_seq = ($firstDayOfWeek + $j) % 7;}<!--// 요일위치 조정(V480)-->
<!--@if($WDay_seq==1 && $module_info->display_week_number =='Y')-->
{@ $tmp_weekNo = "(".date("W", strtotime($Calmain[$i][$j])).")"; //몇주차 }
{@ $wrkfld_weekNo = "<span class='week_no'>".$tmp_weekNo."</span>";}
<!--@else-->
{@ $wrkfld_weekNo = "";}
<!--@end-->
<!--@if($WDay_seq==0 || $tmparr4[0] != null)-->
{@ $wrkfld_dt = "<span class='date_label holiday font_big'>".$tmp_dsp_mmdd."</span>";}<!--//일요일,휴일-->
<!--@elseif($WDay_seq==6)-->
{@ $wrkfld_dt = "<span class='date_label saturday font_big'>".$tmp_dsp_mmdd."</span>";}<!--// 토요일-->
<!--@else-->
{@ $wrkfld_dt = "<span class='date_label weekday font_big'>".$tmp_dsp_mmdd."</span>";}<!--// 평일-->
<!--@end-->
<!--@if($ind_lunar_all == 'Y' && $Calmain_DD != null)-->
{@ $wrkfld_lunar = "<span class='lunar'>".$tmpfld_lunar."</span>";}<!--// 음력 - 모든날자 표시-->
<!--@elseif($ind_lunar == 'Y' && ($tmparr_lunar[2] == 1 || $tmparr_lunar[2] == 10 || $tmparr_lunar[2] == 15 || $tmparr_lunar[2] == 20))-->
{@ $wrkfld_lunar = "<span class='lunar'>".$tmpfld_lunar."</span>";}<!--// 음력 - 1,10,15,20일 표시-->
<!--@else-->
{@ $wrkfld_lunar = '';}
<!--@end-->
<!--@if($ind_holiday == 'Y' && $tmparr4[0] != "")--><!--// 공휴일 날자영역 출력을 위해-->
{@ $wrkfld_holiday_top = "<span class='holiday strong holiday_topline'>".$tmparr4[0]."</span>";}
<!--@else-->
{@ $wrkfld_holiday_top = '';}
<!--@end-->
<!--@if($ind_memday == 'Y' && $tmparr5[0] !="")--><!--// --기념일 날자영역 출력을 위해-->
{@ $wrkfld_memday_top =  "<span class ='memorial memday_topline'>".$tmparr5[0]."</span>";}
<!--@else-->
{@ $wrkfld_memday_top = '';}
<!--@end-->
{@ $is_offday = FALSE; // clear}
<!--@if($ind_offday_naNew || $ind_offday_Label)--><!--// 휴무일 신규금지및 휴무일표시V430-->
{@ $is_offday = in_array(strval($WDay_seq), $dft_offday); // $j(순서)를 $WDay_seq(요일)로 변경(V500) }
<!--@if(!$is_offday && $ind_holiday_off)-->
{@ if($dft_holiday[$Calmain_MM][$Calmain_DD] != "") $is_offday = TRUE; //default holiday}
<!--@end-->
<!--@end-->
{@ $is_pastday = FALSE; // 과거일정}
<!--@if(mktime(0,0,0,$Calmain_MM,$Calmain_DD,$Calmain_YY) < mktime(0,0,0,$todayMM,$todayDD,$todayYY))-->
{@ $is_pastday = TRUE;}
<!--@end-->
<!--@if($ind_reservation != 'N' && $module_info->display_resv_btn != 'N')--><!--// 예약버튼-->
<!--@if($ind_offday_naNew && $is_offday)--><!--// 휴무일 신규금지면-->
{@ $wrkfld_btn = '';}
{@ $date_tooltip = ' title='.$lang->pln_off_day.' ';}
<!--@else-->
<!--@if($is_pastday)--><!--// 과거일정-->
{@ $wrkfld_btn = '';}
{@ $date_tooltip = ' title='.$lang->pln_closed_resv2.' ';}
<!--@else-->
{@ $wrkfld_btn = ' <button title="'.$lang->pln_resv2.'" type="button" class="button3"> <span>'.$lang->pln_resv.'</span></button>';}
{@ $date_tooltip = ' title='.$lang->pln_resv2.' ';}
<!--@end-->
<!--@end-->
<!--@else-->
{@ $wrkfld_btn = '';}
{@ $date_tooltip = ' title='.$lang->pln_write.' ';}
<!--@end-->
{@ $wrkfld_link = '';}
<!--@if($is_offday && $ind_offday_naNew || $ind_reservation != 'N' && $is_pastday)-->
<!--// 휴무일 신규금지 및 예약일정시 과거일자는 링크없이.-->
{@ $wrkfld_link = "<a href='#' class='strong past_day'>" .$wrkfld_weekNo.$wrkfld_dt.$wrkfld_btn.$wrkfld_lunar.$wrkfld_memday_top.$wrkfld_holiday_top."</a>";}
<!--@else-->
{@
$write_ymd = $Calmain_YY.substr('0'.$Calmain_MM,-2).substr('0'.$Calmain_DD,-2);// '-' 제거 일정시작 확장변수 값
$wrkfld_url = getUrl('act','dispBoardWrite','document_srl','','extra_vars1',$write_ymd);// 일자 클릭시 쓰기로
}
<!--@if($Calmain_MM != $pMonth && $ind_fill == 'Y' && $pOption == 'M' && $ind_weekly_base <= 6)--><!--//월이다르면 반투명(TD에는잘안됨)-->
{@ $wrkfld_class = ' diff_month';}
<!--@else-->
{@ $wrkfld_class = '';}
<!--@end-->
{@ $wrkfld_link = "<a href=".$wrkfld_url." class='strong link_allow " .$wrkfld_class."'>" .$wrkfld_weekNo.$wrkfld_dt.$wrkfld_btn.$wrkfld_lunar.$wrkfld_memday_top.$wrkfld_holiday_top."</a>";}
<!--@end-->
<!--@if($Calmain_YY == $todayYY && $Calmain_MM == $todayMM && $Calmain_DD == $todayDD )-->
{@ $outtext = "<div class='date_div today_date_bg' style='height:18px;' ".$date_tooltip. ">".$wrkfld_link."</div>";}<!--//당일-->
<!--@else-->
{@ $outtext = "<div class='date_div' style='margin:0; height:18px;' ".$date_tooltip. ">".$wrkfld_link."</div>";}<!--//평일-->
<!--@end-->
{@ $tbl_html .= $outtext; //날자영역 출력}
<!--@if($j == 0)--><!--// 첫 칼럼이면-->
{@ $tbl_html .= "<div id='week_schedule_".$i."' style='position:relative;'></div>";}<!--// 주별 장기일정 콘테이너-->
<!--@end-->
{@ $tbl_html .= "<div id='day_schedule_container_".$Calmain[$i][$j]."'><div id='day_space_".$Calmain[$i][$j]."' ></div>";}
<!--@if(!empty($tmparr6[0]))--><!--// =일정/플랜= -->
<!--@foreach($tmparr6 as $val)-->
<!--@if(trim($val))--><!--// 빈어레이는 무시하고 빠진다.-->
{@ $tmparr7=explode("|&Oslash;|",$val);}<!--// 일정/플랜  2차 "|&Oslash;|",로 분리-->
<!--@if(!empty($tmparr7[0]))-->
<!--@if($ind_bgcolor_option == "category_bg")--><!--//분류색이 배경색이면-->
{@ $tmp_color_chr = '';}
<!--@else-->
{@ $tmp_color_chr = $tmparr7[6];}
<!--@end-->
{@ $lplan_cat = (!empty($tmparr7[5]))?"<span style='color:".$tmp_color_chr.";'>[".$tmparr7[5]."] </span>":"";}<!--//분류-->
{@ $lplan_state = null;}
<!--@if(!empty($tmparr7[4]))-->
{@ $arr_icon = explode(",",$tmparr7[4]);}
<!--@foreach($arr_icon as $icon)-->
<!--@if($icon = trim($icon))-->
<!--@if(file_exists($skinpath."images/icon/".$icon))-->
{@ $icon_folder = "";}
<!--@elseif(file_exists($skinpath."images/icon/client/".$icon))-->
{@ $icon_folder = "client/";}
<!--@elseif(file_exists($skinpath."images/icon/manager/".$icon))-->
{@ $icon_folder = "manager/";}
<!--@end-->
{@ $lplan_state .= "<img src='".$skinpath."images/icon/".$icon_folder.$icon."'/>";}<!--//일정확인-->
<!--@end-->
<!--@end-->
<!--@end-->
<!--@if(!$tmparr7[8])--><!--//시간표시-->
{@
$title_time = null;// 제목에표시할 시간값
$time_start =null;// 일정 시작시간
$time_end = null;// 일정 종료시간
$time_disply_fld = null;// 툴팁에표시할 시간값
$tmp_time = null;
}
<!--@else-->
{@ $tmp_time = explode(",",$tmparr7[8]);}
<!--@if($ind_reservation == "T")--><!--// 예약(시간)-->
{@
$title_time = $tmp_time[0];
$time_start = $tmp_time[0];
$time_end = trim($tmp_time[count($tmp_time)-1]);
$tmp_etime_arr = explode(':',$time_end);
$ind_interval = $module_info->time_interval;//시간간격
$time_end = date('H:i', mktime($tmp_etime_arr[0],$tmp_etime_arr[1]+$ind_interval,-1,1,1,2011));
$time_disply_fld = "[".$tmparr7[8]."]&#x0A;";//선택내용 전부
}
<!--@else--><!--// 중복허용 -->
{@
$title_time = $tmp_time[0];
$time_start = $tmp_time[0];
$time_end = trim($tmp_time[count($tmp_time)-1]);
}
<!--@if($time_start && $time_start == $time_end)-->
{@ $time_disply_fld = "[".$time_start."-"."] ";}
<!--@else-->
{@ $time_disply_fld = "[".$time_start."-".$time_end."] ";}
<!--@end-->
{@
$tmp_etime_arr = explode(':',$time_end);
$ind_interval = $module_info->time_interval;//시간간격
$time_end = date('H:i', mktime($tmp_etime_arr[0],$tmp_etime_arr[1],-1,1,1,2011));
}
<!--@end-->
<!--@end--><!--//시간표시-->
<!--@if($module_info->display_tooltip == "all" || $module_info->display_tooltip == "")--><!--// 툴팁표시조건 -->
{@ $tooltip_desc = $time_disply_fld.$tmparr7[2];}
<!--@elseif($module_info->display_tooltip == "log" && $is_logged)-->
{@ $tooltip_desc = $time_disply_fld.$tmparr7[2];}
<!--@elseif($module_info->display_tooltip == "adm" && $grant->is_admin)-->
{@ $tooltip_desc = $time_disply_fld.$tmparr7[2];}
<!--@end--><!--//툴팁표시조건-->
{@ $title_disp = $tmparr7[0];}<!--// 출력될 일정 제목-->
<!--@if($tmparr7[11] > 1)--><!--// 일정기간 1일이상일경우 -->
{@ $id_overflow = "overflow:hidden; height:14px;";}
<!--@else-->
{@ $id_overflow = "";}
<!--@end-->
<!--@if($tmparr7[3] =="" && $tmparr7[6] =="")-->
{@ $tmparr7[3] = $tmparr7[6] = "#77CC00";}
<!--@end-->
<!--@if($ind_bgcolor_option == "picker_bg")--><!--// 선택색상을->배경색-->
{@
$tmp_style = "style='clear:both; background-color:".$tmparr7[3]."; ".$id_overflow."'";
$tmp_style1_0 = "style='background-color:".$tmparr7[3]."; '";
$tmp_style1_1 = "style='padding:2px 0 0 2px; background-color:".$tmparr7[3]."; border:medium double  #FFFFFF;'";
$tmp_style2 = "style='vertical-align:top; background-color:".$tmparr7[3].";'";
}
<!--@elseif($ind_bgcolor_option == "picker_text")--><!--// 선택색상을->글자색-->
{@
$tmp_style = "style='clear:both; color:".$tmparr7[3]."; ".$id_overflow."'";
$tmp_style1_0 = "style='color:".$tmparr7[3]."; '";
$tmp_style1_1 = "style='padding:2px 0 0 2px; color:".$tmparr7[3]."; border:medium double ".$tmparr7[3].";'";
$tmp_style2 = "style='vertical-align:top; color:".$tmparr7[3].";'";
}
<!--@elseif($ind_bgcolor_option == "category_bg" && $ind_use_category == "Y")--><!--// 분류색상을->배경색-->
{@
$color_chr = 'whitesmoke';
$tmp_style = "style='clear:both; color:".$color_chr."; background-color:".$tmparr7[6]."; ".$id_overflow."'";
$tmp_style1_0 = "style='color:".$color_chr."; background-color:".$tmparr7[6]."; '";
$tmp_style1_1 = "style='padding:2px 0 0 2px; color:".$color_chr."; background-color:".$tmparr7[6]."; border:medium double #FFFFFF;'";
$tmp_style2 = "style='vertical-align:top; color:".$color_chr."; background-color:".$tmparr7[6].";'";
}
<!--@elseif($ind_bgcolor_option == "category_text" && $ind_use_category == "Y")--><!--// 분류색상을->글자색-->
{@
$tmp_style = "style='clear:both; color:".$tmparr7[6]."; ".$id_overflow."'";
$tmp_style1_0 = "style='color:".$tmparr7[6]."; '";
$tmp_style1_1 = "style='padding:2px 0 0 2px; color:".$tmparr7[6]."; border:medium double ".$tmparr7[6].";'";
$tmp_style2 = "style='vertical-align:top; color:".$tmparr7[6].";'";
}
<!--@else--><!--// 기본은 선택색상->배경색-->
{@
$tmp_style = "style='clear:both; background-color:".$tmparr7[3]."; ".$id_overflow."'";
$tmp_style1_0 = "style='background-color:".$tmparr7[3]."; '";
$tmp_style1_1 = "style='padding:2px 0 0 2px; background-color:".$tmparr7[3]."; border:medium double  #FFFFFF;'";
$tmp_style2 = "style='vertical-align:top; background-color:".$tmparr7[3].";'";
}
<!--@end-->
<!--@if($document_srl == $tmparr7[12])--><!--// 열린문서 블링크-->
{@ $blink_class = 'blink_me';}
<!--@else-->
{@ $blink_class = '';}
<!--@end-->
<!--@if(!empty($tmparr7[10]) && $tmparr7[11] == 1 && !$ind_mobile)--><!--// 그림있고 하루일정이며 모바일아닐때-->
<!--@if($ind_image_diary == "Y")--><!--// 액자없음-->
{@ $temp_html = "<a ".$tmp_style2." href=".$tmparr7[1].">"."<span class='schedule_view schedule_bottom $blink_class' ".$tmp_style1_0." title='".$tooltip_desc."'>"."<img style='vertical-align:top;' src='".$tmparr7[10]."'/>"."<span style='clear:both;'>".$title_disp.$tmparr7[9]."</span>"."</span>"."</a>";}
<!--@elseif($ind_image_diary == "F")--><!--// 액자있음--->
{@ $temp_html = "<a ".$tmp_style2." href=".$tmparr7[1].">"."<span class='schedule_view schedule_bottom $blink_class' ".$tmp_style1_1." title='".$tooltip_desc."'>"."<img style='vertical-align:top;' src='".$tmparr7[10]."'/>"."<span style='clear:both;'>".$title_disp.$tmparr7[9]."</span>"."</span>"."</a>";}
<!--@else--><!--// 적용안음--->
{@ $temp_html = "<a ".$tmp_style2." href=".$tmparr7[1]."> "."<span class='schedule_view schedule_bottom $blink_class' ".$tmp_style." title='".$tooltip_desc."'>".$lplan_state.$title_time." ".$title_disp.$tmparr7[9]."</span>"."</a>";}
<!--@end-->
<!--@else-->
<!--@if($ind_repeat_style != "N" || $tmparr7[11] == 1)--><!--// 제목한번표시 또는 하루일정-->
{@ $temp_html = "<a ".$tmp_style2." href=".$tmparr7[1]."> "."<span class='schedule_view schedule_bottom $blink_class' ".$tmp_style." title='".$tooltip_desc."'>".$lplan_state.$title_time." ".$title_disp.$tmparr7[9]."</span>"."</a>";}
<!--@else--><!--// 제목여러번 표시면서 연속일정-->
{@ $temp_html = "<a ".$tmp_style2." href=".$tmparr7[1].">"."<span class='schedule_view schedule_bottom $blink_class' ".$tmp_style." title='".$tooltip_desc."'>"."<span class='inside'>".$lplan_state.$title_time.$title_disp."</span>";}<!--//첫날 -->
<!--@for($tmp_i=1; $tmp_i < $tmparr7[11] ; $tmp_i++)-->
<!--@if($tmp_i == $tmparr7[11]-1)-->
{@ $temp_html .= "<span class='inside_end'>".$title_disp.$tmparr7[9]."</span>";}<!--//마지막날 -->
<!--@else-->
{@ $temp_html .= "<span class='inside'>".$title_disp."</span>";}<!--//중간날 -->
<!--@end-->
<!--@end-->
{@ $temp_html .= "</span>"."</a>";}
<!--@end-->
<!--@end-->
<!--@if( $tmparr7[11] == 1 && $ind_oneday_container == 'T' && $pOption != 'W1' && $pOption != 'W2' )-->
{@ $tbl_html .= "<div class='drag'>".$temp_html."</div>";}<!--// 하루일정이면 바로 처리-->
<!--@else-->
<!--@if($tmparr7[11] > 1 || $pOption == 'W1' || $pOption == 'W2' || $ind_oneday_container == 'J' )--><!--// 일정이 하루이상, 주간일정표, js 일때는 jquery에서 처리-->
{@
$segtype = "a";
$schedule_html[$count_seg]['week'] = $i; //week seq
$schedule_html[$count_seg]['weekday'] = $j; //컬럼 순서
$schedule_html[$count_seg]['yymmdd'] = $Calmain[$i][$j];
$schedule_html[$count_seg]['month'] = $Calmain_MM;
$schedule_html[$count_seg]['date'] = $Calmain_DD;
$schedule_html[$count_seg]['revseq'] = 7-$tmparr7[11];
$schedule_html[$count_seg]['segtype'] = $segtype;
$schedule_html[$count_seg]['length'] = $tmparr7[11];
$schedule_html[$count_seg]['image'] = $tmparr7[10];
$schedule_html[$count_seg]['pln_srl'] = $tmparr7[12];
$schedule_html[$count_seg]['pln_start'] = $tmparr7[13];
$schedule_html[$count_seg]['pln_end'] = $tmparr7[14];
$schedule_html[$count_seg]['pln_stime'] = $time_start;
$schedule_html[$count_seg]['pln_etime'] = $time_end;
$schedule_html[$count_seg]['html'] = $temp_html;
$count_seg += 1;
}
<!--@else-->
{@ $tbl_html .= "<div class='drag'>".$temp_html."</div>";}<!--// J아니며 하루일정이면 바로 처리-->
<!--@end-->
<!--@end-->
<!--@end--><!--// end if(trim($val))-->
<!--@end--><!--// end if(!empty($tmparr7[0]))-->
<!--@end--><!--// end foreeach($tmparr6 as $val)-->
<!--@end--><!--// end if(!empty($tmparr6[0])) 일정플랜 끝 -->
{@ $holiday_process = "js";}<!--// 휴일 ""는 직접처리 "js"는 jquery에서 처리-->
<!--@if($ind_holiday == 'Y' && $tmparr4[0])-->
{@ $temp_html = "<div class='holiday strong holiday_bottomline'>".$tmparr4[0]."</div>";}<!--// 공휴일-->
<!--@if( $pOption != 'W1' && $pOption != 'W2' )--><!--// 주별로 보는경우가 아닐때는 직접 처리가 좋을듯(시간단축)-->
{@ $tbl_html .= $temp_html;}<!--// 바로 처리-->
<!--@else-->
<!--@if($holiday_process =="js")-->
{@
$schedule_html[$count_seg]['week'] = $i; //week seq
$schedule_html[$count_seg]['weekday'] = $j;  //컬럼 순서
$schedule_html[$count_seg]['yymmdd'] = $Calmain[$i][$j];
$schedule_html[$count_seg]['month'] = $Calmain_MM;
$schedule_html[$count_seg]['date'] = $Calmain_DD;
$schedule_html[$count_seg]['revseq'] = 6;
$schedule_html[$count_seg]['segtype'] ="b";
$schedule_html[$count_seg]['length'] = 1;
$schedule_html[$count_seg]['image'] = "";
$schedule_html[$count_seg]['pln_srl'] = "";
$schedule_html[$count_seg]['pln_start'] = "";
$schedule_html[$count_seg]['pln_end'] = "";
$schedule_html[$count_seg]['pln_stime'] = "";
$schedule_html[$count_seg]['pln_etime'] = "";
$schedule_html[$count_seg]['html'] = $temp_html;
$count_seg += 1;
}
<!--@else-->
{@ $tbl_html .= $temp_html;}
<!--@end-->
<!--@end-->
<!--@end-->
<!--@if($ind_memday == 'Y' && !empty($tmparr5[0]))--><!--// 기념일 체크-->
{@ $temp_html =  "<div class ='memorial memday_bottomline'>".$tmparr5[0]."</div>";}<!--// 기념일-->
<!--@if( $pOption != 'W1' && $pOption != 'W2' )--><!--// 주별로 보는경우가 아닐때는 직접 처리가 좋을듯(시간단축)-->
{@ $tbl_html .= $temp_html;}<!--// 바로 처리-->
<!--@else-->
<!--@if($holiday_process =="js")-->
{@
$schedule_html[$count_seg]['week'] = $i; //week seq
$schedule_html[$count_seg]['weekday'] = $j;  //컬럼 순서
$schedule_html[$count_seg]['yymmdd'] = $Calmain[$i][$j];
$schedule_html[$count_seg]['month'] = $Calmain_MM;
$schedule_html[$count_seg]['date'] = $Calmain_DD;
$schedule_html[$count_seg]['revseq'] = 6;
$schedule_html[$count_seg]['segtype'] ="c";
$schedule_html[$count_seg]['length'] = 1;
$schedule_html[$count_seg]['image'] = "";
$schedule_html[$count_seg]['pln_srl'] = "";
$schedule_html[$count_seg]['pln_start'] = "";
$schedule_html[$count_seg]['pln_end'] = "";
$schedule_html[$count_seg]['pln_stime'] = "";
$schedule_html[$count_seg]['pln_etime'] = "";
$schedule_html[$count_seg]['html'] = $temp_html;
$count_seg += 1;
}
<!--@else-->
{@ $tbl_html .= $temp_html;}
<!--@end-->
<!--@end-->
<!--@end-->
<!--@if($is_offday && $ind_offday_Label)--><!--// 휴무일-->
{@ $temp_html = "<div class='offday strong'>".$lang->pln_off_day."</div>";}<!--//휴뮤일표시-->
{@ $tbl_html .= $temp_html;}<!--// 바로 처리-->
<!--@end-->
{@ $tbl_html .= "</div>";}<!--//end day_schedule_container-->
<!--@end--><!--// end 날자 있을때-->
{@ $tbl_html .= "</div>";}<!--//end planner_calendar_inner-->
{@ $tbl_html .= "</td>\n";}
<!--@end--><!--// end for($j=0; $j<7; $j++)-->
{@ $tbl_html .= "</tr>\n";}
<!--@end--><!--// end for($i=0; $i<$weekcount; $i++)-->
{@ $tbl_html .= "</tbody>";}
{@ $tbl_html .= "</table>";}
{$tbl_html}<!--// 달력 테이블 출력-->
<!--@if($display_offset != $offset && $offset != null && $device != printer )--><!--// 사용자시간 출력 -->
<div class="client_time">
Server time is <font color='blue'>{date("l, F j, Y, g:i a", $display_timestamp)}</font>
and your time is <font color='blue'>{date("l, F j, Y, g:i a", $client_timestamp)}</font> : {($display_timestamp-$client_timestamp)*(-1)/3600}Hrs difference.
</div>
<!--@end-->
<!--@if($pOption == 'W1' && $pTimeSchedule == 'Y' || $pOption == 'W2' && $pTimeSchedule == 'Y' )-->
<div class="Timetable_div" ID="Timetable_div"></div><!--// time table 출력 -->
<!--@end-->
<div id='dummy' style='visibility:hidden; position:absolute; top:0px; left:-200px;'></div><!--// 하루일정 높이계산을 위한 임시 div -->
</div><!--// end class="planner123" -->
<!--@if($grant->manager)--><!--// 관리자로 로그인및 문서목록출력이 Y 일경우 문서 리스트 출력 -->
<!--@if($module_info->display_doc_list != "N")-->
<!--#include("./_style.list_planner.html")-->
<!--@endif-->
<!--@else-->
{@$write_ymd = date('Y',$wrk_timestamp).date('m',$wrk_timestamp).date('d',$wrk_timestamp)}
<div class="buttonRight" style="float:right;">
<a href="{getUrl('act','dispBoardWrite','document_srl','','extra_vars1',$write_ymd)}" class="buttonOfficial"><span>{$lang->cmd_write}</span></a>
</div>
<!--@end-->
<!--@if($schedule_html)--><!--// jquery에서 사용할 스케쥴 어레이 정렬: 출력순서 조정위해 타입->날자->긴일정->시간 순서로 정렬 -->
{@ $schedule_html = planner123_main::fn_array_orderby($schedule_html, 'segtype', SORT_ASC, 'date', SORT_ASC, 'revseq', SORT_ASC, 'pln_stime', SORT_ASC, 'pln_srl', SORT_DESC);}
<!--@end-->
<!--@if(!function_exists('json_encode'))--><!--// json_encode: PHP 5.2.0 부터지원 -->
<!--@if(!class_exists("Services_JSON"))-->
{@ require_once($skinpath.'function/class.services_JSON.php');}
<!--@end-->
{@
$json = new Services_JSON;
$schedule_html_json = $json->encode($schedule_html);
}
<!--@else-->
{@ $schedule_html_json = json_encode($schedule_html);}
<!--@end-->
<script type="text/javascript">
//<![CDATA[
/* 일정 출력 */
var arrayFromPHP = {$schedule_html_json}; // PHP에서 만든 일정 어레이를 받아서
var repeat_style = "{$ind_repeat_style}";
var ind_pOption = "{$pOption}";
var ind_mobile = "{$ind_mobile}";
var dispStart_stamp = "{$dispStart_stamp}";
var dispEnd_stamp = "{$dispEnd_stamp}";
var dispStart_date = "{$dispStart_date}";
var dispEnd_date = "{$dispEnd_date}";
var ind_Timetable = "{$pTimeSchedule}"; // display time-table
var lang_type = "{$lang_type}";
jQuery(function($){
$(document).ready(function() {
doDisplaySchedule(arrayFromPHP,repeat_style,ind_mobile);   // make schedule on the calendar table
if ((ind_pOption == 'W1' || ind_pOption == 'W2') && ind_Timetable == 'Y' ) {
fnMakeTableGrid(dispStart_date,dispEnd_date,ind_mobile,lang_type); // grid time table
fnMakeWeeklySchedule(arrayFromPHP,dispStart_stamp,dispEnd_stamp); // make schedule in the time table
fnAdjTimeTable(); // adjust time table header
}
});
/* windows resize일때 일정폭 재계산 (별의미없음)*/
$(window).resize(function() {
doResizeScheduleWidth(arrayFromPHP);
});
/* blinker*/
function blinker() {
$('.blink_me').fadeOut(300);
$('.blink_me').fadeIn(300);
}
setInterval(blinker, 1800);
});
//]]>
</script>
